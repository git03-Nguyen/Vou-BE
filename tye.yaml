# tye application configuration file
# read all about it at https://github.com/dotnet/tye
#
# when you've given us a try, we'd love to know what you think:
#    https://aka.ms/AA7q20u
#
name: vou-be
extensions:
  - name: dapr
    version: "v1"
    configuration:
      - name: tracing
        spec:
          samplingRate: "1"
      - name: zipkin
        spec:
          type: "tracing.zipkin"
          version: "v1"
          metadata:
            - name: "enabled"
              value: "true"
            - name: "exporterAddress"
              value: "http://localhost:9411/api/v2/spans"
      - name: statestore
        spec:
          type: "state.redis"
          version: "v1"
          metadata:
            - name: "redisHost"
              value: "redis:6379"
            - name: "redisPassword"
              value: ""
      - name: pubsub
        spec:
          type: "pubsub.redis"
          version: "v1"
          metadata:
            - name: "redisHost"
              value: "redis:6379"
            - name: "redisPassword"
              value: ""
          
services:
  - name: apigateway
    project: ./src/ApiGateway/ApiGateway.csproj
    env_file:
      - ./tye-env
    bindings:
      - port: 5000
        protocol: https

  - name: authserver
    project: ./src/AuthServer/AuthServer.csproj
    env_file:
      - ./tye-env
    bindings:
      - port: 5100
        protocol: http

  - name: eventservice
    project: ./src/EventService/EventService.csproj
    env_file:
      - ./tye-env
    bindings:
      - port: 5200
        protocol: http

  - name: gameservice
    project: ./src/GameService/GameService.csproj
    env_file:
      - ./tye-env
    bindings:
      - port: 5300
        protocol: http

  - name: paymentservice
    project: ./src/PaymentService/PaymentService.csproj
    env_file:
      - ./tye-env
    bindings:
      - port: 5400
        protocol: http
        
#  - name: backofficeservicejobs
#    executable: dotnet
#    args: run -p BackOffice.Service.Jobs/BackOffice.Service.Jobs.csproj
#    env_file:
#      - ./tye-env